// =============================================================================
// CHECKOUT STEPS (Component)
// =============================================================================

// Checkout Step
//
// 1. Very specific visual problem which can't be solved by generic breakpoints
// The form just gets too squashed between large and before xlarge when in 2 column
// -----------------------------------------------------------------------------
.checkout-steps {
    counter-reset: $checkoutStep-counter;
    list-style-type: none;
    margin: spacing("double") + (spacing("single")) 0 0;
    font-family: $fontFamily-mori;

    @include breakpoint("medium") {
        padding-left: (spacing("double") * 2);
        padding-right: 0;
    }
}

.noissue-checkout-step {
    border: container("border");
    border-color: $color-black-10;
    border-width: $checkoutStep-borderSize;
    counter-increment: $checkoutStep-counter;
    padding: spacing("single");
    border-radius: 0;
    margin-bottom: spacing("half");
    transition: background-color .2s ease-in-out;

    &--complete {
        background-color: $color-black-10;
        border-width: 0;
    }

    @include breakpoint("small") {
        border-radius: spacing("single") / 2;
        margin-bottom: spacing("single");
    }
}

.checkout-view-header {
    display: flex;
    margin-bottom: remCalc(10px);

    &:last-child {
        margin-bottom: 0;
    }
}

.checkout-view-content {
    @include breakpoint("large") {
        @include collapse;
    }
}

.checkout-step-info {
    margin-bottom: spacing("single");
}

.checkout-form,
.checklist-skeleton {
    margin: 0;

    @include breakpoint("small") {
        margin-left: remCalc($checkoutStep-counter-size) + $checkoutStep-header-figure-margin;
    }

    @include breakpoint("large") {
        margin-left: 0;
    }

    @include breakpoint(1080px) {
        margin-left: remCalc($checkoutStep-counter-size) + $checkoutStep-header-figure-margin;
    }
}

// Checkout Step Counter
// -----------------------------------------------------------------------------
.stepHeader-counter {
    @include square($checkoutStep-counter-size);

    background-color: color("primary");
    border-radius: 50%;
    text-align: center;
    transition: transform 250ms ease;

    &::before {
        @include square($checkoutStep-counter-size);

        color: $checkoutStep-counter-color;
        content: counter($checkoutStep-counter);
        display: inline-block;
        font-size: fontSize("small");
        line-height: #{$checkoutStep-counter-size}px;
        text-align: center;
    }

    svg {
        display: none;
        fill: $checkoutStep-counter-color;
        padding: $checkoutStep-counter-padding;
    }
}

.stepHeader-counter--complete {
    &::before {
        @include square(0);

        content: "";
    }

    svg {
        display: inline-block;
        padding: $checkoutStep-counter-padding--small;
    }
}

.stepHeader-counter--isActive {
    &::before {
        @include square($checkoutStep-counter-size - 2);

        content: "";
        border: $checkoutStep-counter-border-size * 2 solid $color-white;
        outline: $checkoutStep-counter-border-size solid $color-acai-100;
        border-radius: 100%;
    }

    svg {
        display: none;
    }
}

// Checkout Step Header
// -----------------------------------------------------------------------------
.stepHeader {
    align-items: top;
    display: flex;
    flex-direction: row;
    padding: 0;
    width: 100%;

    @include breakpoint("small") {
        flex-wrap: nowrap;
    }

    @include breakpoint("large") {
        flex-wrap: nowrap;
    }

    &.is-clickable {
        cursor: pointer;
    }
}

.stepHeader-figure {
    align-items: center;
    display: flex;
    height: remCalc($checkoutStep-counter-size);
    margin-right: $checkoutStep-header-body-margin;
}

.stepHeader-title {
    font-size: $checkoutStep-heading-font-size;
    margin: 0 0 0 $checkoutStep-header-figure-margin;
    min-width: 9rem;
}

.remove-checkout-step-numbers {
    li.noissue-checkout-step {
        div.stepHeader-counter.icon {
            display: none;
        }

        div.stepHeader-counter--complete.icon {
            display: inline-block;
            margin-right: spacing("single") / 2;
        }
        
        div.stepHeader-counter--isActive.icon {
            display: inline-block;
            margin-right: spacing("single") / 2;

            svg {
                display: none;
            }
        }

        .checkout-form,
        div.stepHeader-body,
        div.checklist-skeleton,
        h2.stepHeader-title {
            margin-left: 0;
        }
    }
}

.stepHeader-body {
    @include textTruncateMultiline;

    color: color("primary");
    margin-left: remCalc($checkoutStep-counter-size) + $checkoutStep-header-figure-margin;
    margin-top: remCalc(10px);
    order: 3;
    width: 100%;

    @include breakpoint("small") {
        margin-left: 0;
        order: inherit;
    }

    @include breakpoint("medium") {
        margin-left: remCalc($checkoutStep-counter-size) + $checkoutStep-header-figure-margin;
    }

    @include breakpoint("large") {
        margin-left: 0;
    }
}

.stepHeader-actions {
    align-self: flex-start;
    margin-left: auto;
    margin-top: remCalc(5px);

    .button {
        margin-bottom: 0;
    }
}

.checkout-suggestion {
    margin: 0;

    @include breakpoint("small") {
        margin-left: remCalc($checkoutStep-counter-size) + $checkoutStep-header-figure-margin;
    }

    @include breakpoint("large") {
        margin-left: 0;
    }

    @include breakpoint(1080px) {
        margin-left: remCalc($checkoutStep-counter-size) + $checkoutStep-header-figure-margin;
    }
}
